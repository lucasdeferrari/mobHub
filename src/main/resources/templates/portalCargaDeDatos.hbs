{{#partial "contenido" }}
    <link rel="stylesheet" href="/css/portalCargaDeDatos.css">
<!-- Contenido principal de tu página -->
    <title>Portal</title>
<div class="container">
    <div class="upload-box">
        <h2>Portal de Carga de Datos</h2>
        <h5>Entidades prestadoras y organismos de control</h5>
        <form id="archivoForm" enctype="multipart/form-data">
            <div class="input-box">
                <input type="file" id="archivo" accept=".csv" style="display: none;">
                <button type="button" id="seleccionar-archivo" onclick="document.getElementById('archivo').click();">Seleccionar su archivo .csv</button>
            </div>
            <button type="button" class="subir-button" onclick="subirArchivo()">Subir archivo</button>
        </form>
    </div>
</div>

<!-- Scripts de Bootstrap y otros recursos -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js"></script>
<!--<script src="js/generales.js"></script>   puede o no puede servir-->

<script>
        function subirArchivo() {
            const inputFile = document.getElementById('archivo');
            if (inputFile.files.length > 0) {
                const archivo = inputFile.files[0];
                const formData = new FormData();
                formData.append('archivo', archivo);

                // Realiza una solicitud AJAX para enviar el archivo al servidor
                const xhr = new XMLHttpRequest();
                xhr.open('POST', '/portalCargaDeDatos', true);
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        alert('El archivo se ha subido con éxito.');
                    } else {
                        alert('Hubo un error al subir el archivo.');
                    }
                };
                xhr.send(formData);
            } else {
                alert('Por favor, seleccione un archivo primero.');
            }
        }
</script>


{{/partial}}
{{> templates/base }}